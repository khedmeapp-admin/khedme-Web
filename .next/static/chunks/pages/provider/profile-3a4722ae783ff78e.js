(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[721],{2569:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>n});var l=a(7876),t=a(4232),i=a(7685);function n(){let e="https://khedme-api.onrender.com",[r,a]=(0,t.useState)({id:1,name:"",phone:"",district:"",branch:"",service:"",available:!0}),[n,s]=(0,t.useState)(!1),[o,d]=(0,t.useState)(!1),c=async()=>{s(!0);try{let l=await fetch(`${e}/api/providers/${r.id}`),t=await l.json();t.success&&t.provider?a(t.provider):i.Ay.error("Failed to load profile")}catch(e){console.error("❌ Error fetching provider:",e),i.Ay.error("Error fetching profile")}finally{s(!1)}};(0,t.useEffect)(()=>{c()},[]);let u=async a=>{a.preventDefault(),d(!0);try{let a=await fetch(`${e}/api/providers/update`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});(await a.json()).success?i.Ay.success("Profile updated ✅"):i.Ay.error("Failed to update")}catch(e){console.error("❌ Error saving profile:",e),i.Ay.error("Error updating profile")}finally{d(!1)}},h=async()=>{try{let l=await fetch(`${e}/api/providers/update`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r.id,available:!r.available})});(await l.json()).success?(a(e=>({...e,available:!e.available})),i.Ay.success(`Now marked as ${!r.available?"available ✅":"unavailable ⛔"}`)):i.Ay.error("Failed to update availability")}catch(e){console.error("❌ Toggle error:",e),i.Ay.error("Error toggling availability")}};return n?(0,l.jsx)("p",{className:"text-center mt-10 text-gray-500",children:"Loading..."}):(0,l.jsxs)("div",{className:"max-w-lg mx-auto p-6 bg-white rounded-2xl shadow-md mt-10",children:[(0,l.jsx)("h1",{className:"text-2xl font-semibold text-orange-600 mb-6 text-center",children:"Provider Profile"}),(0,l.jsxs)("form",{onSubmit:u,className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block font-medium mb-1",children:"Name"}),(0,l.jsx)("input",{type:"text",value:r.name,onChange:e=>a({...r,name:e.target.value}),className:"w-full border rounded-lg p-2",placeholder:"Enter your name",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block font-medium mb-1",children:"Phone"}),(0,l.jsx)("input",{type:"text",value:r.phone,onChange:e=>a({...r,phone:e.target.value}),className:"w-full border rounded-lg p-2",placeholder:"Enter your phone number",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block font-medium mb-1",children:"District"}),(0,l.jsx)("input",{type:"text",value:r.district,onChange:e=>a({...r,district:e.target.value}),className:"w-full border rounded-lg p-2",placeholder:"e.g. Beirut",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block font-medium mb-1",children:"Branch"}),(0,l.jsxs)("select",{value:r.branch,onChange:e=>a({...r,branch:e.target.value}),className:"w-full border rounded-lg p-2",required:!0,children:[(0,l.jsx)("option",{value:"",children:"Select a branch"}),(0,l.jsx)("option",{value:"On-site",children:"On-site"}),(0,l.jsx)("option",{value:"Online",children:"Online"}),(0,l.jsx)("option",{value:"Both",children:"Both"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block font-medium mb-1",children:"Service"}),(0,l.jsx)("input",{type:"text",value:r.service,onChange:e=>a({...r,service:e.target.value}),className:"w-full border rounded-lg p-2",placeholder:"e.g. Plumbing, Graphic Design...",required:!0})]}),(0,l.jsx)("button",{type:"submit",disabled:o,className:"w-full bg-orange-600 hover:bg-orange-700 text-white py-2 rounded-lg transition disabled:bg-gray-400",children:o?"Saving...":"Save Profile"})]}),(0,l.jsx)("div",{className:"mt-6 text-center",children:(0,l.jsx)("button",{onClick:h,className:`px-4 py-2 rounded-lg font-medium transition ${r.available?"bg-green-500 hover:bg-green-600 text-white":"bg-gray-400 hover:bg-gray-500 text-white"}`,children:r.available?"Available ✅":"Unavailable ⛔"})})]})}},3924:(e,r,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/provider/profile",function(){return a(2569)}])}},e=>{e.O(0,[636,593,792],()=>e(e.s=3924)),_N_E=e.O()}]);