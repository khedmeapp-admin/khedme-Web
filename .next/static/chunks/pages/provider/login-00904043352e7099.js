(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[305],{2312:(e,r,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/provider/login",function(){return t(8833)}])},8833:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i});var n=t(7876),o=t(4232),s=t(9099),a=t(7685);function i(){let e=(0,s.useRouter)(),[r,t]=(0,o.useState)(1),[i,l]=(0,o.useState)(""),[d,u]=(0,o.useState)(""),[c,g]=(0,o.useState)(null),[h,p]=(0,o.useState)(!1),f=async e=>{e.preventDefault(),p(!0);try{let e=await fetch("https://khedme-api.onrender.com/auth/request-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:i})}),r=await e.json();if(!e.ok)throw Error(r.message);g(r.providerId),t(2),a.Ay.success("OTP sent (demo code: 123456)")}catch(e){a.Ay.error(e.message)}finally{p(!1)}},y=async r=>{r.preventDefault(),p(!0);try{let r=await fetch("https://khedme-api.onrender.com/auth/verify-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({providerId:c,otp:d})}),t=await r.json();if(!r.ok)throw Error(t.message);localStorage.setItem("provider",JSON.stringify(t.provider)),a.Ay.success("Logged in successfully!"),e.push("/provider/dashboard")}catch(e){a.Ay.error(e.message)}finally{p(!1)}};return(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-100 to-orange-200",children:(0,n.jsxs)("div",{className:"bg-white p-8 rounded-2xl shadow-xl w-full max-w-md",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-center text-orange-600 mb-6",children:"Provider Login"}),1===r?(0,n.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,n.jsx)("input",{type:"text",placeholder:"Enter your phone number (+961...)",value:i,onChange:e=>l(e.target.value),className:"w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-orange-400"}),(0,n.jsx)("button",{disabled:h,className:"w-full bg-orange-500 text-white py-2 rounded-lg hover:bg-orange-600 transition disabled:opacity-50",children:h?"Sending OTP...":"Send OTP"})]}):(0,n.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,n.jsx)("input",{type:"text",placeholder:"Enter OTP (123456)",value:d,onChange:e=>u(e.target.value),className:"w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-orange-400"}),(0,n.jsx)("button",{disabled:h,className:"w-full bg-orange-500 text-white py-2 rounded-lg hover:bg-orange-600 transition disabled:opacity-50",children:h?"Verifying...":"Verify OTP"})]})]})})}}},e=>{e.O(0,[636,593,792],()=>e(e.s=2312)),_N_E=e.O()}]);