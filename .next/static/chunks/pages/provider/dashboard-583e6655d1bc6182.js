(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[482],{420:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(7876),r=s(4232),i=s(2787),l=s(4734),n=s(7685);function d(){let[e,t]=(0,r.useState)(null),[s,d]=(0,r.useState)([]),[o,c]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=localStorage.getItem("provider");e&&t(JSON.parse(e))},[]),(0,r.useEffect)(()=>{e?.id&&x()},[e]);let x=async()=>{if(e?.id)try{c(!0);let t=await fetch(`https://khedme-api.onrender.com/api/providers/applications/${e.id}`);if(!t.ok)throw Error("Network error");let s=await t.json();s.success?d(s.applications||[]):n.Ay.error("Failed to load applications ❌")}catch(e){console.error("❌ Error fetching applications:",e),n.Ay.error("Failed to connect to server ❌")}finally{c(!1),p(!1)}};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-white text-gray-800",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-10",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-orange-600",children:"Provider Dashboard"}),e&&(0,a.jsxs)("p",{className:"text-gray-600 mt-1",children:["Welcome,"," ",(0,a.jsx)("span",{className:"font-semibold",children:e.name||e.full_name})]})]}),(0,a.jsxs)(i.$,{onClick:x,disabled:o,className:"bg-orange-500 hover:bg-orange-600 text-white flex items-center gap-2",children:[(0,a.jsx)(l.A,{className:`w-4 h-4 ${o?"animate-spin":""}`}),"Refresh"]})]}),m?(0,a.jsx)("div",{className:"flex justify-center py-20",children:(0,a.jsx)("div",{className:"animate-pulse text-gray-400",children:"Loading..."})}):0===s.length?(0,a.jsx)("p",{className:"text-gray-500 text-center py-10",children:"No applications yet."}):(0,a.jsx)("div",{className:"grid gap-4",children:s.map(e=>(0,a.jsxs)("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-orange-100 hover:shadow-md transition",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:e.service||e.job_service||"Untitled Job"}),(0,a.jsxs)("p",{className:"text-gray-500 text-sm",children:[e.district||e.job_district," • Budget: $",e.budget||e.job_budget]}),(0,a.jsx)("p",{className:"mt-2 text-gray-700",children:e.message||"No message provided."}),(0,a.jsx)("p",{className:`mt-3 inline-block px-3 py-1 rounded-full text-sm font-medium ${"approved"===e.status?"bg-green-100 text-green-700":"rejected"===e.status?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:e.status?e.status.charAt(0).toUpperCase()+e.status.slice(1):"Pending"})]},e.application_id||e.id))})]})})}},8284:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/provider/dashboard",function(){return s(420)}])}},e=>{e.O(0,[636,593,792],()=>e(e.s=8284)),_N_E=e.O()}]);