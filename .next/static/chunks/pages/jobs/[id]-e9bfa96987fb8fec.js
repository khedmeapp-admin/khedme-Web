(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[914],{7197:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(7876),a=s(4232),n=s(9099),o=s(7685);function l(){let{id:e}=(0,n.useRouter)().query,[t,s]=(0,a.useState)(null),[l,i]=(0,a.useState)(!1),[c,d]=(0,a.useState)("");(0,a.useEffect)(()=>{e&&fetch(`https://khedme-api.onrender.com/api/jobs/${e}`).then(e=>e.json()).then(e=>s(e.job)).catch(()=>o.Ay.error("Failed to load job"))},[e]);let p=async t=>{t.preventDefault();try{let t=await fetch(`https://khedme-api.onrender.com/api/jobs/${e}/apply`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider_id:1,message:c||""})}),s=await t.json();t.ok?(o.Ay.success("Application submitted successfully!"),i(!1),d("")):o.Ay.error(s.message||"Error submitting application")}catch(e){o.Ay.error("Network error â€” please try again")}};return t?(0,r.jsxs)("div",{className:"min-h-screen bg-[#FFF4EB] flex flex-col items-center p-6",children:[(0,r.jsx)(o.l$,{position:"top-center"}),(0,r.jsxs)("div",{className:"bg-white shadow-lg p-6 rounded-2xl w-full max-w-lg mt-10",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-orange-600 mb-3",children:t.service}),(0,r.jsx)("p",{className:"text-gray-700 mb-2",children:t.description}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[(0,r.jsx)("strong",{children:"District:"})," ",t.district]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:[(0,r.jsx)("strong",{children:"Budget:"})," $",t.budget]}),l?(0,r.jsxs)("form",{onSubmit:p,className:"bg-white border rounded-xl p-5 mt-4 shadow-md",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-orange-600 mb-3",children:["Apply for ",t.service]}),(0,r.jsx)("textarea",{placeholder:"Message (optional)",value:c,onChange:e=>d(e.target.value),className:"border w-full rounded-md p-2 mb-3"}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,r.jsx)("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 border rounded-lg text-gray-600",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:"Submit"})]})]}):(0,r.jsx)("button",{onClick:()=>i(!0),className:"bg-orange-500 text-white px-5 py-2 rounded-lg hover:bg-orange-600 transition",children:"Apply for this Job"})]})]}):(0,r.jsx)("div",{className:"p-10 text-center",children:"Loading..."})}},9099:(e,t,s)=>{e.exports=s(9603)},9260:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/jobs/[id]",function(){return s(7197)}])}},e=>{e.O(0,[636,593,792],()=>e(e.s=9260)),_N_E=e.O()}]);