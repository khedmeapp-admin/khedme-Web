(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[875],{3070:(e,r,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/approve",function(){return s(7901)}])},7901:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>o});var i=s(7876),a=s(4232),d=s(1040),t=s(8230);function n(){return(0,i.jsxs)("nav",{className:"bg-orange-500 text-white px-6 py-3 flex justify-between items-center shadow",children:[(0,i.jsx)("div",{className:"font-bold text-xl",children:"Khedme Admin"}),(0,i.jsxs)("div",{className:"flex gap-6",children:[(0,i.jsx)(t,{href:"/admin/home",className:"hover:underline",children:"Dashboard"}),(0,i.jsx)(t,{href:"/admin/approve",className:"hover:underline",children:"Approvals"}),(0,i.jsx)(t,{href:"/",className:"hover:underline",children:"Home"})]})]})}var l=s(7685),c=s(2787);function o(){let[e,r]=(0,a.useState)([]),[s,t]=(0,a.useState)([]),o=async()=>{try{let e=await d.A.get("https://khedme-api.onrender.com/api/providers/pending");e.data.success&&r(e.data.providers)}catch(e){l.Ay.error("Failed to load providers ❌")}};(0,a.useEffect)(()=>{o()},[]);let h=(e,r)=>{t(s=>r?[...s,e]:s.filter(r=>r!==e))},p=async e=>{h(e,!0);try{await d.A.post(`https://khedme-api.onrender.com/api/providers/approve?id=${e}`),l.Ay.success("Provider approved ✅"),r(r=>r.filter(r=>r.id!==e))}catch(e){l.Ay.error("Error approving provider ❌"),console.error(e)}finally{h(e,!1)}},x=async e=>{h(e,!0);try{await d.A.post(`https://khedme-api.onrender.com/api/providers/reject?id=${e}`),l.Ay.success("Provider rejected ❌"),r(r=>r.filter(r=>r.id!==e))}catch(e){l.Ay.error("Error rejecting provider ❌"),console.error(e)}finally{h(e,!1)}};return(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-white",children:[(0,i.jsx)(n,{}),(0,i.jsxs)("div",{className:"max-w-5xl mx-auto py-10 px-6",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-orange-600 mb-6",children:"Pending Providers"}),0===e.length?(0,i.jsx)("p",{className:"text-gray-500 text-center",children:"No pending providers."}):(0,i.jsx)("div",{className:"grid gap-4",children:e.map(e=>(0,i.jsxs)("div",{className:"flex items-center justify-between bg-white shadow-sm border border-orange-100 p-5 rounded-2xl",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:e.full_name}),(0,i.jsxs)("p",{className:"text-gray-500 text-sm",children:["\uD83D\uDCDE ",e.phone," • #",e.id]})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(c.$,{disabled:s.includes(e.id),onClick:()=>p(e.id),className:"bg-green-500 hover:bg-green-600 text-white",children:s.includes(e.id)?"...":"Approve"}),(0,i.jsx)(c.$,{disabled:s.includes(e.id),onClick:()=>x(e.id),className:"bg-red-500 hover:bg-red-600 text-white",children:s.includes(e.id)?"...":"Reject"})]})]},e.id))})]})]})}}},e=>{e.O(0,[40,636,593,792],()=>e(e.s=3070)),_N_E=e.O()}]);