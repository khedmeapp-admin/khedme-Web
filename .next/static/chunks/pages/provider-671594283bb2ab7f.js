(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[423],{128:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/provider",function(){return r(6131)}])},5246:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(7161).A)("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]])},6131:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var s=r(7876),a=r(4232),i=r(9099),l=r(7546),o=r(7161);let n=(0,o.A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var c=r(5246);let d=(0,o.A)("toggle-right",[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]]),h=(0,o.A)("toggle-left",[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]]),x=(0,o.A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var m=r(7685);function g(){let e=(0,i.useRouter)(),[t,r]=(0,a.useState)("profile"),[o,g]=(0,a.useState)(!0),f=[{id:"profile",label:"Profile",icon:(0,s.jsx)(n,{className:"w-4 h-4"})},{id:"jobs",label:"My Jobs",icon:(0,s.jsx)(c.A,{className:"w-4 h-4"})}];return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-orange-50 to-white flex flex-col items-center",children:[(0,s.jsx)(m.l$,{position:"top-center",toastOptions:{style:{background:"#FF6600",color:"white",fontWeight:"bold",borderRadius:"10px"}}}),(0,s.jsxs)("header",{className:"w-full bg-white shadow-sm p-4 flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-xl font-bold text-orange-500",children:"Khedme Provider"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("button",{onClick:()=>g(!o),className:`flex items-center gap-2 px-3 py-1.5 rounded-full font-medium ${o?"bg-green-100 text-green-600":"bg-gray-200 text-gray-600"}`,children:[o?(0,s.jsx)(d,{className:"w-4 h-4"}):(0,s.jsx)(h,{className:"w-4 h-4"}),o?"Available":"Offline"]}),(0,s.jsxs)("button",{onClick:()=>{localStorage.clear(),m.Ay.success("Logged out \uD83D\uDC4B"),setTimeout(()=>e.push("/auth"),1e3)},className:"text-red-500 hover:text-red-600 flex items-center gap-1 font-medium",children:[(0,s.jsx)(x,{className:"w-4 h-4"})," Logout"]})]})]}),(0,s.jsx)("nav",{className:"flex gap-3 mt-6",children:f.map(e=>(0,s.jsxs)("button",{onClick:()=>r(e.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all ${t===e.id?"bg-orange-500 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.icon,e.label]},e.id))}),(0,s.jsxs)(l.P.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{duration:.3},className:"w-full max-w-2xl mt-8 bg-white rounded-2xl shadow-lg p-6",children:["profile"===t&&(0,s.jsx)(p,{available:o}),"jobs"===t&&(0,s.jsx)(u,{})]},t)]})}function p({available:e}){let[t,r]=(0,a.useState)(null),[i,l]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{let e=localStorage.getItem("providerId");if(!e){window.location.href="/auth";return}!async function(){try{let t=await fetch(`https://khedme-api.onrender.com/api/providers/${e}`);if(!t.ok)throw Error("Failed to fetch provider data");let s=await t.json();r(s)}catch(e){m.Ay.error(e.message)}finally{l(!1)}}()},[]),i)?(0,s.jsx)("p",{className:"text-gray-500",children:"Loading profile..."}):t?(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Profile Details"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-gray-700",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Name:"})," ",t.name]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Service:"})," ",t.service]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Phone:"})," ",t.phone]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Status:"})," ",e?"Available":"Offline"]})]})]}):(0,s.jsx)("p",{className:"text-red-500",children:"No profile found"})}function u(){let[e,t]=(0,a.useState)([]),[r,i]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{let e=localStorage.getItem("providerId");async function r(){try{let r=await fetch(`https://khedme-api.onrender.com/api/providers/${e}/jobs`);if(!r.ok)throw Error("Failed to fetch jobs");let s=await r.json();t(s.jobs||[])}catch(e){m.Ay.error(e.message)}finally{i(!1)}}e&&r()},[]),r)?(0,s.jsx)("p",{className:"text-gray-500",children:"Loading jobs..."}):(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"My Jobs"}),0===e.length?(0,s.jsx)("p",{className:"text-gray-500",children:"No jobs assigned yet."}):(0,s.jsx)("div",{className:"flex flex-col gap-3",children:e.map(e=>(0,s.jsxs)(l.P.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{delay:.05*e.id},className:"p-4 rounded-xl border border-gray-100 shadow-sm bg-gray-50 hover:bg-orange-50 transition-all",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-800",children:e.service}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:e.district}),(0,s.jsx)("p",{className:"text-sm mt-1",children:e.description}),(0,s.jsx)("span",{className:`inline-block mt-2 text-xs px-3 py-1 rounded-full font-medium ${"completed"===e.status?"bg-green-100 text-green-600":"bg-yellow-100 text-yellow-600"}`,children:e.status})]},e.id))})]})}},7161:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(4232);let a=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},i=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,s.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:o="",children:n,iconNode:c,...d},h)=>(0,s.createElement)("svg",{ref:h,...l,width:t,height:t,stroke:e,strokeWidth:a?24*Number(r)/Number(t):r,className:i("lucide",o),...!n&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(d)&&{"aria-hidden":"true"},...d},[...c.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(n)?n:[n]])),n=(e,t)=>{let r=(0,s.forwardRef)(({className:r,...l},n)=>(0,s.createElement)(o,{ref:n,iconNode:t,className:i(`lucide-${a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,r),...l}));return r.displayName=a(e),r}},9099:(e,t,r)=>{e.exports=r(9603)}},e=>{e.O(0,[546,636,593,792],()=>e(e.s=128)),_N_E=e.O()}]);