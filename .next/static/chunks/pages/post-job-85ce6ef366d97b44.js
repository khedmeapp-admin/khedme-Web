(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[972],{1532:(e,r,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/post-job",function(){return t(2386)}])},2386:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>l});var s=t(7876),a=t(4232),n=t(7685);function l(){let[e,r]=(0,a.useState)({branch:"",service:"",district:"",description:"",budget:""}),[t,l]=(0,a.useState)([]),[i,o]=(0,a.useState)([]),[c,d]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("https://khedme-api.onrender.com/api/meta");if(!e.ok)throw Error("Failed to fetch");let r=await e.json();r.success?(l(r.categories||[]),o(r.districts||[])):n.Ay.error("Failed to load data")}catch(e){console.error("❌ Meta fetch error:",e),n.Ay.error("Could not connect to Khedme API")}})()},[]);let h=t=>{r({...e,[t.target.name]:t.target.value})},u=async t=>{t.preventDefault(),d(!0);try{let t=await fetch("https://khedme-api.onrender.com/api/jobs/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});(await t.json()).job?(n.Ay.success("Job posted successfully!"),r({branch:"",service:"",district:"",description:"",budget:""})):n.Ay.error("Failed to post job")}catch(e){console.error("❌ Error posting job:",e),n.Ay.error("Error posting job")}finally{d(!1)}},m=e.branch?t.filter(r=>r.branch===e.branch):[];return(0,s.jsxs)("div",{className:"max-w-xl mx-auto p-6 bg-white rounded-2xl shadow-md mt-10",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-center text-orange-600 mb-4",children:"Post a Job"}),(0,s.jsxs)("form",{onSubmit:u,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block font-medium mb-1",children:"Main Branch"}),(0,s.jsxs)("select",{name:"branch",value:e.branch,onChange:e=>{h(e),r(e=>({...e,service:""}))},className:"w-full border rounded-lg p-2",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select a branch"}),(0,s.jsx)("option",{value:"On-site",children:"On-site"}),(0,s.jsx)("option",{value:"Online",children:"Online"}),(0,s.jsx)("option",{value:"Both",children:"Both"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block font-medium mb-1",children:"Service"}),(0,s.jsxs)("select",{name:"service",value:e.service,onChange:h,className:"w-full border rounded-lg p-2",required:!0,disabled:!e.branch,children:[(0,s.jsx)("option",{value:"",children:e.branch?"Select a service":"Select a branch first"}),m.map(e=>(0,s.jsxs)("option",{value:e.name,children:[e.name," — ",e.name_ar]},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block font-medium mb-1",children:"District"}),(0,s.jsxs)("select",{name:"district",value:e.district,onChange:h,className:"w-full border rounded-lg p-2",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select a district"}),i.map(e=>(0,s.jsxs)("option",{value:e.name,children:[e.name," — ",e.name_ar]},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block font-medium mb-1",children:"Description"}),(0,s.jsx)("textarea",{name:"description",value:e.description,onChange:h,placeholder:"Describe the task...",className:"w-full border rounded-lg p-2",rows:3,required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block font-medium mb-1",children:"Budget (USD)"}),(0,s.jsx)("input",{type:"number",name:"budget",value:e.budget,onChange:h,placeholder:"e.g. 50",className:"w-full border rounded-lg p-2",required:!0})]}),(0,s.jsx)("button",{type:"submit",disabled:c,className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-2 rounded-lg transition",children:c?"Posting...":"Post Job"})]})]})}}},e=>{e.O(0,[636,593,792],()=>e(e.s=1532)),_N_E=e.O()}]);