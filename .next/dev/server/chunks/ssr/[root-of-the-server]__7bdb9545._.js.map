{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///D:/Khedme/Khedme-Web/src/pages/provider/index.js"],"sourcesContent":["// src/pages/provider/index.js\r\nimport { useEffect, useState } from \"react\";\r\nimport toast from \"react-hot-toast\";\r\n\r\nexport default function ProviderDashboard() {\r\n  const API_BASE = \"https://khedme-api.onrender.com\";\r\n  const [provider, setProvider] = useState(null);\r\n  const [applications, setApplications] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [refreshing, setRefreshing] = useState(false);\r\n\r\n  /* ---------------------------------------------------\r\n     âœ… Load provider info from localStorage\r\n  --------------------------------------------------- */\r\n  useEffect(() => {\r\n    const stored = localStorage.getItem(\"provider\");\r\n    if (stored) {\r\n      try {\r\n        const parsed = JSON.parse(stored);\r\n        setProvider(parsed);\r\n      } catch {\r\n        console.error(\"Failed to parse provider data\");\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  /* ---------------------------------------------------\r\n     âœ… Fetch Provider Applications\r\n  --------------------------------------------------- */\r\n  const fetchApplications = async () => {\r\n    if (!provider?.id) return;\r\n    setLoading(true);\r\n    try {\r\n      const res = await fetch(`${API_BASE}/api/providers/applications/${provider.id}`);\r\n      const data = await res.json();\r\n      if (data.success) {\r\n        setApplications(data.applications);\r\n      } else {\r\n        toast.error(\"Failed to load applications\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"âŒ Error fetching applications:\", err);\r\n      toast.error(\"Error loading applications\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (provider?.id) fetchApplications();\r\n  }, [provider]);\r\n\r\n  /* ---------------------------------------------------\r\n     ðŸ” Refresh Button\r\n  --------------------------------------------------- */\r\n  const handleRefresh = async () => {\r\n    if (!provider?.id) return;\r\n    setRefreshing(true);\r\n    await fetchApplications();\r\n    setRefreshing(false);\r\n    toast.success(\"Applications refreshed âœ…\");\r\n  };\r\n\r\n  /* ---------------------------------------------------\r\n     ðŸ§± UI\r\n  --------------------------------------------------- */\r\n  if (!provider)\r\n    return (\r\n      <div className=\"flex justify-center items-center min-h-screen text-gray-500\">\r\n        Please log in as a provider.\r\n      </div>\r\n    );\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto p-6\">\r\n      <h1 className=\"text-3xl font-bold text-orange-600 mb-2\">\r\n        Provider Dashboard\r\n      </h1>\r\n      <p className=\"text-gray-600 mb-6\">\r\n        Welcome, <span className=\"font-medium\">{provider.full_name}</span>\r\n      </p>\r\n\r\n      <div className=\"flex justify-end mb-6\">\r\n        <button\r\n          onClick={handleRefresh}\r\n          disabled={refreshing}\r\n          className=\"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg transition disabled:opacity-50\"\r\n        >\r\n          {refreshing ? \"Refreshing...\" : \"ðŸ”„ Refresh\"}\r\n        </button>\r\n      </div>\r\n\r\n      {loading ? (\r\n        <div className=\"text-center text-gray-500\">Loading applications...</div>\r\n      ) : applications.length === 0 ? (\r\n        <p className=\"text-center text-gray-500\">No applications yet.</p>\r\n      ) : (\r\n        <div className=\"grid gap-4\">\r\n          {applications.map((app) => (\r\n            <div\r\n              key={app.application_id}\r\n              className=\"bg-white rounded-2xl p-5 shadow-md border border-orange-100 hover:shadow-lg transition\"\r\n            >\r\n              <h2 className=\"text-lg font-semibold text-gray-800\">\r\n                {app.service}\r\n              </h2>\r\n              <p className=\"text-gray-700\">{app.description}</p>\r\n\r\n              <div className=\"flex justify-between items-center mt-3\">\r\n                <p className=\"text-sm text-gray-500\">\r\n                  District: {app.district || \"N/A\"} | Budget: ${app.budget}\r\n                </p>\r\n\r\n                <span\r\n                  className={`px-3 py-1 rounded-full text-sm font-medium ${\r\n                    app.status === \"approved\"\r\n                      ? \"bg-green-100 text-green-700\"\r\n                      : app.status === \"rejected\"\r\n                      ? \"bg-red-100 text-red-700\"\r\n                      : \"bg-yellow-100 text-yellow-700\"\r\n                  }`}\r\n                >\r\n                  {app.status}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,8BAA8B;;;;;;AAC9B;AACA;;;;;;;;AAEe,SAAS;IACtB,MAAM,WAAW;IACjB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,+GAAQ,EAAC;IACzC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,+GAAQ,EAAC,EAAE;IACnD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+GAAQ,EAAC;IACvC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,+GAAQ,EAAC;IAE7C;;sDAEoD,GACpD,IAAA,gHAAS,EAAC;QACR,MAAM,SAAS,aAAa,OAAO,CAAC;QACpC,IAAI,QAAQ;YACV,IAAI;gBACF,MAAM,SAAS,KAAK,KAAK,CAAC;gBAC1B,YAAY;YACd,EAAE,OAAM;gBACN,QAAQ,KAAK,CAAC;YAChB;QACF;IACF,GAAG,EAAE;IAEL;;sDAEoD,GACpD,MAAM,oBAAoB;QACxB,IAAI,CAAC,UAAU,IAAI;QACnB,WAAW;QACX,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,GAAG,SAAS,4BAA4B,EAAE,SAAS,EAAE,EAAE;YAC/E,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,IAAI,KAAK,OAAO,EAAE;gBAChB,gBAAgB,KAAK,YAAY;YACnC,OAAO;gBACL,qJAAK,CAAC,KAAK,CAAC;YACd;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,kCAAkC;YAChD,qJAAK,CAAC,KAAK,CAAC;QACd,SAAU;YACR,WAAW;QACb;IACF;IAEA,IAAA,gHAAS,EAAC;QACR,IAAI,UAAU,IAAI;IACpB,GAAG;QAAC;KAAS;IAEb;;sDAEoD,GACpD,MAAM,gBAAgB;QACpB,IAAI,CAAC,UAAU,IAAI;QACnB,cAAc;QACd,MAAM;QACN,cAAc;QACd,qJAAK,CAAC,OAAO,CAAC;IAChB;IAEA;;sDAEoD,GACpD,IAAI,CAAC,UACH,qBACE,qKAAC;QAAI,WAAU;kBAA8D;;;;;;IAKjF,qBACE,qKAAC;QAAI,WAAU;;0BACb,qKAAC;gBAAG,WAAU;0BAA0C;;;;;;0BAGxD,qKAAC;gBAAE,WAAU;;oBAAqB;kCACvB,qKAAC;wBAAK,WAAU;kCAAe,SAAS,SAAS;;;;;;;;;;;;0BAG5D,qKAAC;gBAAI,WAAU;0BACb,cAAA,qKAAC;oBACC,SAAS;oBACT,UAAU;oBACV,WAAU;8BAET,aAAa,kBAAkB;;;;;;;;;;;YAInC,wBACC,qKAAC;gBAAI,WAAU;0BAA4B;;;;;uBACzC,aAAa,MAAM,KAAK,kBAC1B,qKAAC;gBAAE,WAAU;0BAA4B;;;;;qCAEzC,qKAAC;gBAAI,WAAU;0BACZ,aAAa,GAAG,CAAC,CAAC,oBACjB,qKAAC;wBAEC,WAAU;;0CAEV,qKAAC;gCAAG,WAAU;0CACX,IAAI,OAAO;;;;;;0CAEd,qKAAC;gCAAE,WAAU;0CAAiB,IAAI,WAAW;;;;;;0CAE7C,qKAAC;gCAAI,WAAU;;kDACb,qKAAC;wCAAE,WAAU;;4CAAwB;4CACxB,IAAI,QAAQ,IAAI;4CAAM;4CAAa,IAAI,MAAM;;;;;;;kDAG1D,qKAAC;wCACC,WAAW,CAAC,2CAA2C,EACrD,IAAI,MAAM,KAAK,aACX,gCACA,IAAI,MAAM,KAAK,aACf,4BACA,iCACJ;kDAED,IAAI,MAAM;;;;;;;;;;;;;uBAtBV,IAAI,cAAc;;;;;;;;;;;;;;;;AA+BrC","debugId":null}}]
}