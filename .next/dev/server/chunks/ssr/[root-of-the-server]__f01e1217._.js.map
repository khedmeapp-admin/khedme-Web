{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["file:///D:/Khedme/Khedme-Web/pages/jobs.js"],"sourcesContent":["// pages/jobs.js\r\nimport { useEffect, useState } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { Briefcase, MapPin, DollarSign, Loader2 } from \"lucide-react\";\r\n\r\nexport default function JobsPage() {\r\n  const [jobs, setJobs] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n  const [sortOption, setSortOption] = useState(\"newest\");\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const jobsPerPage = 6;\r\n\r\n  useEffect(() => {\r\n    async function fetchJobs() {\r\n      try {\r\n        const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/api/jobs/all`);\r\n        if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n        const data = await res.json();\r\n        setJobs(data.jobs || []);\r\n      } catch (err) {\r\n        console.error(\"Error fetching jobs:\", err);\r\n        setError(\"Failed to load jobs. Please try again later.\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    fetchJobs();\r\n  }, []);\r\n\r\n  // âœ… Sort jobs before displaying\r\n  const sortedJobs = [...jobs].sort((a, b) => {\r\n    if (sortOption === \"newest\") return new Date(b.created_at) - new Date(a.created_at);\r\n    if (sortOption === \"oldest\") return new Date(a.created_at) - new Date(b.created_at);\r\n    if (sortOption === \"lowBudget\") return Number(a.budget) - Number(b.budget);\r\n    if (sortOption === \"highBudget\") return Number(b.budget) - Number(a.budget);\r\n    return 0;\r\n  });\r\n\r\n  // âœ… Pagination logic\r\n  const indexOfLastJob = currentPage * jobsPerPage;\r\n  const indexOfFirstJob = indexOfLastJob - jobsPerPage;\r\n  const currentJobs = sortedJobs.slice(indexOfFirstJob, indexOfLastJob);\r\n  const totalPages = Math.ceil(sortedJobs.length / jobsPerPage);\r\n\r\n  const handlePageChange = (page) => setCurrentPage(page);\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-b from-orange-50 to-white text-black py-16 px-6\">\r\n      <div className=\"max-w-5xl mx-auto text-center mb-10\">\r\n        <motion.h1\r\n          initial={{ opacity: 0, y: -20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 0.5 }}\r\n          className=\"text-4xl font-bold text-orange-600 mb-2\"\r\n        >\r\n          Available Jobs\r\n        </motion.h1>\r\n        <p className=\"text-gray-600\">Browse all posted jobs and find your next task.</p>\r\n      </div>\r\n\r\n      {/* ðŸ”½ Sorting Dropdown */}\r\n      <div className=\"max-w-5xl mx-auto mb-8 flex justify-end\">\r\n        <select\r\n          value={sortOption}\r\n          onChange={(e) => setSortOption(e.target.value)}\r\n          className=\"border border-orange-200 rounded-xl px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-400 bg-white\"\r\n        >\r\n          <option value=\"newest\">Newest First</option>\r\n          <option value=\"oldest\">Oldest First</option>\r\n          <option value=\"lowBudget\">Lowest Budget</option>\r\n          <option value=\"highBudget\">Highest Budget</option>\r\n        </select>\r\n      </div>\r\n\r\n      {loading ? (\r\n        <div className=\"flex justify-center items-center h-64\">\r\n          <Loader2 className=\"animate-spin text-orange-600 w-10 h-10\" />\r\n        </div>\r\n      ) : error ? (\r\n        <div className=\"text-center text-red-500\">{error}</div>\r\n      ) : currentJobs.length === 0 ? (\r\n        <div className=\"text-center text-gray-500\">No jobs available yet.</div>\r\n      ) : (\r\n        <>\r\n          <motion.div\r\n            className=\"max-w-5xl mx-auto grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\"\r\n            initial=\"hidden\"\r\n            animate=\"visible\"\r\n            variants={{\r\n              hidden: { opacity: 0 },\r\n              visible: { opacity: 1, transition: { staggerChildren: 0.1 } },\r\n            }}\r\n          >\r\n            {currentJobs.map((job) => (\r\n              <motion.div\r\n                key={job.id}\r\n                variants={{ hidden: { opacity: 0, y: 30 }, visible: { opacity: 1, y: 0 } }}\r\n                whileHover={{ scale: 1.03 }}\r\n                className=\"bg-white border border-orange-100 rounded-2xl shadow-md hover:shadow-lg transition p-5 flex flex-col justify-between\"\r\n              >\r\n                <div>\r\n                  <h2 className=\"text-xl font-semibold text-orange-700 mb-2 flex items-center gap-2\">\r\n                    <Briefcase className=\"w-5 h-5 text-orange-500\" /> {job.service}\r\n                  </h2>\r\n                  <p className=\"text-gray-700 mb-3\">{job.description}</p>\r\n                  <div className=\"flex items-center text-sm text-gray-500 gap-2 mb-2\">\r\n                    <MapPin className=\"w-4 h-4 text-orange-400\" /> {job.district}\r\n                  </div>\r\n                  <div className=\"flex items-center text-sm text-gray-500 gap-2\">\r\n                    <DollarSign className=\"w-4 h-4 text-orange-400\" />{\" \"}\r\n                    <span>{Number(job.budget).toFixed(2)} USD</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"mt-4 text-right\">\r\n                  <span\r\n                    className={`inline-block px-3 py-1 text-sm rounded-full ${\r\n                      job.status === \"pending\"\r\n                        ? \"bg-yellow-100 text-yellow-700\"\r\n                        : \"bg-green-100 text-green-700\"\r\n                    }`}\r\n                  >\r\n                    {job.status}\r\n                  </span>\r\n                </div>\r\n              </motion.div>\r\n            ))}\r\n          </motion.div>\r\n\r\n          {/* ðŸ”½ Pagination Controls */}\r\n          <div className=\"flex justify-center mt-10 gap-2\">\r\n            {[...Array(totalPages)].map((_, i) => (\r\n              <button\r\n                key={i}\r\n                onClick={() => handlePageChange(i + 1)}\r\n                className={`px-4 py-2 rounded-lg border ${\r\n                  currentPage === i + 1\r\n                    ? \"bg-orange-500 text-white border-orange-500\"\r\n                    : \"bg-white text-orange-600 border-orange-300 hover:bg-orange-100\"\r\n                } transition`}\r\n              >\r\n                {i + 1}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}