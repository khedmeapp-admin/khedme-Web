{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Khedme/Khedme-Web/src/components/ui/tabs.js"],"sourcesContent":["import * as React from \"react\";\r\n\r\nexport function Tabs({ defaultValue, children, className }) {\r\n  const [value, setValue] = React.useState(defaultValue);\r\n  return (\r\n    <div className={className}>\r\n      {React.Children.map(children, (child) =>\r\n        React.isValidElement(child)\r\n          ? React.cloneElement(child, { value, setValue })\r\n          : child\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function TabsList({ children, className }) {\r\n  return (\r\n    <div className={`flex border-b ${className || \"\"}`}>\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function TabsTrigger({ value: tabValue, value, setValue, children, className }) {\r\n  return (\r\n    <button\r\n      onClick={() => setValue(tabValue)}\r\n      className={`px-4 py-2 font-medium border-b-2 transition ${\r\n        value === tabValue\r\n          ? \"border-orange-500 text-orange-600\"\r\n          : \"border-transparent text-gray-500 hover:text-orange-600\"\r\n      } ${className || \"\"}`}\r\n    >\r\n      {children}\r\n    </button>\r\n  );\r\n}\r\n\r\nexport function TabsContent({ value: tabValue, value, children }) {\r\n  if (value !== tabValue) return null;\r\n  return <div>{children}</div>;\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;;;AAEO,SAAS,KAAK,EAAE,YAAY,EAAE,QAAQ,EAAE,SAAS,EAAE;IACxD,MAAM,CAAC,OAAO,SAAS,GAAG,+GAAc,CAAC;IACzC,qBACE,qKAAC;QAAI,WAAW;kBACb,+GAAc,CAAC,GAAG,CAAC,UAAU,CAAC,sBAC7B,qHAAoB,CAAC,uBACjB,mHAAkB,CAAC,OAAO;gBAAE;gBAAO;YAAS,KAC5C;;;;;;AAIZ;AAEO,SAAS,SAAS,EAAE,QAAQ,EAAE,SAAS,EAAE;IAC9C,qBACE,qKAAC;QAAI,WAAW,CAAC,cAAc,EAAE,aAAa,IAAI;kBAC/C;;;;;;AAGP;AAEO,SAAS,YAAY,EAAE,OAAO,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAE,QAAQ,EAAE,SAAS,EAAE;IACnF,qBACE,qKAAC;QACC,SAAS,IAAM,SAAS;QACxB,WAAW,CAAC,4CAA4C,EACtD,UAAU,WACN,sCACA,yDACL,CAAC,EAAE,aAAa,IAAI;kBAEpB;;;;;;AAGP;AAEO,SAAS,YAAY,EAAE,OAAO,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAE;IAC9D,IAAI,UAAU,UAAU,OAAO;IAC/B,qBAAO,qKAAC;kBAAK;;;;;;AACf","debugId":null}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["file:///D:/Khedme/Khedme-Web/src/pages/provider/index.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { Tabs, TabsList, TabsTrigger, TabsContent } from \"@/components/ui/tabs\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport toast from \"react-hot-toast\";\r\n\r\nexport default function ProviderDashboard() {\r\n  const [jobs, setJobs] = useState([]);\r\n  const [applications, setApplications] = useState([]);\r\n  const [activeTab, setActiveTab] = useState(\"available\");\r\n  const [appliedJobIds, setAppliedJobIds] = useState([]);\r\n\r\n  const provider =\r\n    typeof window !== \"undefined\"\r\n      ? JSON.parse(localStorage.getItem(\"provider\"))\r\n      : null;\r\n\r\n  /* ---------------------------------------------------\r\n     üü¢ Fetch all jobs\r\n  --------------------------------------------------- */\r\n  useEffect(() => {\r\n    fetch(`${process.env.NEXT_PUBLIC_API_URL}/api/jobs/all`)\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        if (data.success) setJobs(data.jobs);\r\n      })\r\n      .catch((err) => console.error(\"Error fetching jobs:\", err));\r\n  }, []);\r\n\r\n  /* ---------------------------------------------------\r\n     üü† Fetch provider‚Äôs applications\r\n  --------------------------------------------------- */\r\n  const fetchApplications = () => {\r\n    if (!provider?.id) return;\r\n    fetch(`${process.env.NEXT_PUBLIC_API_URL}/api/providers/applications/${provider.id}`)\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        if (data.success) {\r\n          setApplications(data.applications);\r\n          setAppliedJobIds(data.applications.map((a) => a.job_id)); // üîí Track applied jobs\r\n        }\r\n      })\r\n      .catch((err) => console.error(\"Error fetching applications:\", err));\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchApplications();\r\n    const interval = setInterval(fetchApplications, 10000);\r\n    return () => clearInterval(interval);\r\n  }, [provider]);\r\n\r\n  /* ---------------------------------------------------\r\n     üü£ Apply to a job\r\n  --------------------------------------------------- */\r\n  const handleApply = async (jobId) => {\r\n    if (!provider?.id) return toast.error(\"Provider not found ‚Äî please log in again\");\r\n\r\n    if (appliedJobIds.includes(jobId))\r\n      return toast.error(\"You already applied for this job\");\r\n\r\n    try {\r\n      const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/api/providers/apply`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          job_id: jobId,\r\n          provider_id: provider.id,\r\n          message: \"I would like to apply for this job.\",\r\n        }),\r\n      });\r\n\r\n      const data = await res.json();\r\n      if (data.success) {\r\n        toast.success(\"Application submitted successfully ‚úÖ\");\r\n        setAppliedJobIds((prev) => [...prev, jobId]); // disable button\r\n        setActiveTab(\"applications\");\r\n        fetchApplications();\r\n      } else {\r\n        toast.error(data.message || \"Failed to apply\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error applying for job:\", err);\r\n      toast.error(\"Server error while applying\");\r\n    }\r\n  };\r\n\r\n  /* ---------------------------------------------------\r\n     üß± UI Layout\r\n  --------------------------------------------------- */\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-b from-orange-50 to-white px-6 py-10\">\r\n      <div className=\"max-w-4xl mx-auto\">\r\n        <h1 className=\"text-3xl font-bold text-orange-600 mb-6 text-center\">\r\n          Provider Dashboard\r\n        </h1>\r\n\r\n        <Tabs value={activeTab} onValueChange={setActiveTab}>\r\n          <TabsList className=\"bg-white shadow-sm rounded-xl mb-6 p-1 flex justify-center gap-4\">\r\n            <TabsTrigger value=\"available\">Available Jobs</TabsTrigger>\r\n            <TabsTrigger value=\"applications\">My Applications</TabsTrigger>\r\n          </TabsList>\r\n\r\n          {/* üíº Available Jobs */}\r\n          <TabsContent value=\"available\">\r\n            {jobs.length === 0 ? (\r\n              <p className=\"text-center text-gray-500 mt-10\">No jobs available yet.</p>\r\n            ) : (\r\n              <div className=\"grid gap-4 mt-6\">\r\n                {jobs.map((job) => {\r\n                  const alreadyApplied = appliedJobIds.includes(job.id);\r\n                  return (\r\n                    <div\r\n                      key={job.id}\r\n                      className=\"bg-white p-5 rounded-xl shadow-sm border border-orange-100 hover:shadow-md transition\"\r\n                    >\r\n                      <h2 className=\"text-lg font-semibold text-orange-600\">\r\n                        {job.service}\r\n                      </h2>\r\n                      <p className=\"text-gray-500 text-sm\">District: {job.district}</p>\r\n                      <p className=\"mt-2 text-gray-600\">{job.description}</p>\r\n                      <p className=\"text-orange-500 font-semibold mt-1\">\r\n                        ${job.budget}\r\n                      </p>\r\n                      <Button\r\n                        onClick={() => handleApply(job.id)}\r\n                        disabled={alreadyApplied}\r\n                        className={`w-full mt-4 text-white rounded-lg ${\r\n                          alreadyApplied\r\n                            ? \"bg-gray-300 cursor-not-allowed\"\r\n                            : \"bg-orange-500 hover:bg-orange-600\"\r\n                        }`}\r\n                      >\r\n                        {alreadyApplied ? \"Already Applied\" : \"Apply Now\"}\r\n                      </Button>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            )}\r\n          </TabsContent>\r\n\r\n          {/* üßæ My Applications */}\r\n          <TabsContent value=\"applications\">\r\n            {applications.length === 0 ? (\r\n              <p className=\"text-center text-gray-500 mt-10\">\r\n                You haven‚Äôt applied for any jobs yet.\r\n              </p>\r\n            ) : (\r\n              <div className=\"grid gap-4 mt-6\">\r\n                {applications.map((app) => (\r\n                  <div\r\n                    key={app.application_id}\r\n                    className=\"bg-white p-5 rounded-xl shadow-sm border border-orange-100 hover:shadow-md transition\"\r\n                  >\r\n                    <div className=\"flex justify-between items-start\">\r\n                      <h2 className=\"text-lg font-semibold text-orange-600\">\r\n                        {app.service}\r\n                      </h2>\r\n                      <span\r\n                        className={`px-3 py-1 text-sm font-medium rounded-full ${\r\n                          app.status === \"approved\"\r\n                            ? \"bg-green-100 text-green-700\"\r\n                            : app.status === \"rejected\"\r\n                            ? \"bg-red-100 text-red-700\"\r\n                            : \"bg-yellow-100 text-yellow-700\"\r\n                        }`}\r\n                      >\r\n                        {app.status === \"approved\"\r\n                          ? \"‚úÖ Approved\"\r\n                          : app.status === \"rejected\"\r\n                          ? \"‚ùå Rejected\"\r\n                          : \"‚è≥ Pending\"}\r\n                      </span>\r\n                    </div>\r\n\r\n                    <p className=\"text-gray-500 text-sm mt-1\">\r\n                      District: {app.district}\r\n                    </p>\r\n                    <p className=\"mt-2 text-gray-600\">{app.description}</p>\r\n                    <p className=\"text-orange-500 font-semibold mt-1\">\r\n                      ${app.budget}\r\n                    </p>\r\n                    {app.message && (\r\n                      <p className=\"mt-2 text-gray-500 text-sm italic\">\r\n                        ‚Äú{app.message}‚Äù\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </TabsContent>\r\n        </Tabs>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}