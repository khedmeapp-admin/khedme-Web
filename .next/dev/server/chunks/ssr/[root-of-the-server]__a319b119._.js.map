{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///D:/Khedme/Khedme-Web/src/pages/admin/approve.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport Navbar from \"@/components/AdminNavbar\";\r\nimport toast from \"react-hot-toast\";\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\nexport default function AdminApprove() {\r\n  const [providers, setProviders] = useState([]);\r\n  const [loadingIds, setLoadingIds] = useState([]);\r\n\r\n  // ‚úÖ Fetch pending providers\r\n  const fetchPendingProviders = async () => {\r\n    try {\r\n      const res = await axios.get(\"https://khedme-api.onrender.com/api/providers/pending\");\r\n      if (res.data.success) setProviders(res.data.providers);\r\n    } catch (err) {\r\n      toast.error(\"Failed to load providers ‚ùå\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchPendingProviders();\r\n  }, []);\r\n\r\n  // ‚úÖ Helper to track which provider is being processed\r\n  const markLoading = (id, isLoading) => {\r\n    setLoadingIds((prev) =>\r\n      isLoading ? [...prev, id] : prev.filter((x) => x !== id)\r\n    );\r\n  };\r\n\r\n  // ‚úÖ Approve provider\r\n  const approveProvider = async (id) => {\r\n    markLoading(id, true);\r\n    try {\r\n      await axios.post(`https://khedme-api.onrender.com/api/providers/approve?id=${id}`);\r\n      toast.success(\"Provider approved ‚úÖ\");\r\n      setProviders((prev) => prev.filter((p) => p.id !== id)); // remove from list\r\n    } catch (err) {\r\n      toast.error(\"Error approving provider ‚ùå\");\r\n      console.error(err);\r\n    } finally {\r\n      markLoading(id, false);\r\n    }\r\n  };\r\n\r\n  // ‚úÖ Reject provider\r\n  const rejectProvider = async (id) => {\r\n    markLoading(id, true);\r\n    try {\r\n      await axios.post(`https://khedme-api.onrender.com/api/providers/reject?id=${id}`);\r\n      toast.success(\"Provider rejected ‚ùå\");\r\n      setProviders((prev) => prev.filter((p) => p.id !== id)); // remove from list\r\n    } catch (err) {\r\n      toast.error(\"Error rejecting provider ‚ùå\");\r\n      console.error(err);\r\n    } finally {\r\n      markLoading(id, false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-orange-50 to-white\">\r\n      <Navbar />\r\n      <div className=\"max-w-5xl mx-auto py-10 px-6\">\r\n        <h1 className=\"text-3xl font-bold text-orange-600 mb-6\">\r\n          Pending Providers\r\n        </h1>\r\n\r\n        {providers.length === 0 ? (\r\n          <p className=\"text-gray-500 text-center\">No pending providers.</p>\r\n        ) : (\r\n          <div className=\"grid gap-4\">\r\n            {providers.map((p) => (\r\n              <div\r\n                key={p.id}\r\n                className=\"flex items-center justify-between bg-white shadow-sm border border-orange-100 p-5 rounded-2xl\"\r\n              >\r\n                <div>\r\n                  <h2 className=\"text-lg font-semibold text-gray-800\">\r\n                    {p.full_name}\r\n                  </h2>\r\n                  <p className=\"text-gray-500 text-sm\">\r\n                    üìû {p.phone} ‚Ä¢ #{p.id}\r\n                  </p>\r\n                </div>\r\n\r\n                <div className=\"flex gap-2\">\r\n                  <Button\r\n                    disabled={loadingIds.includes(p.id)}\r\n                    onClick={() => approveProvider(p.id)}\r\n                    className=\"bg-green-500 hover:bg-green-600 text-white\"\r\n                  >\r\n                    {loadingIds.includes(p.id) ? \"...\" : \"Approve\"}\r\n                  </Button>\r\n\r\n                  <Button\r\n                    disabled={loadingIds.includes(p.id)}\r\n                    onClick={() => rejectProvider(p.id)}\r\n                    className=\"bg-red-500 hover:bg-red-600 text-white\"\r\n                  >\r\n                    {loadingIds.includes(p.id) ? \"...\" : \"Reject\"}\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;;;AAEA;AACA;;;;;;;;;;;;AAEe,SAAS;IACtB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,+GAAQ,EAAC,EAAE;IAC7C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,+GAAQ,EAAC,EAAE;IAE/C,4BAA4B;IAC5B,MAAM,wBAAwB;QAC5B,IAAI;YACF,MAAM,MAAM,MAAM,qHAAK,CAAC,GAAG,CAAC;YAC5B,IAAI,IAAI,IAAI,CAAC,OAAO,EAAE,aAAa,IAAI,IAAI,CAAC,SAAS;QACvD,EAAE,OAAO,KAAK;YACZ,qJAAK,CAAC,KAAK,CAAC;QACd;IACF;IAEA,IAAA,gHAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL,sDAAsD;IACtD,MAAM,cAAc,CAAC,IAAI;QACvB,cAAc,CAAC,OACb,YAAY;mBAAI;gBAAM;aAAG,GAAG,KAAK,MAAM,CAAC,CAAC,IAAM,MAAM;IAEzD;IAEA,qBAAqB;IACrB,MAAM,kBAAkB,OAAO;QAC7B,YAAY,IAAI;QAChB,IAAI;YACF,MAAM,qHAAK,CAAC,IAAI,CAAC,CAAC,yDAAyD,EAAE,IAAI;YACjF,qJAAK,CAAC,OAAO,CAAC;YACd,aAAa,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,MAAM,mBAAmB;QAC9E,EAAE,OAAO,KAAK;YACZ,qJAAK,CAAC,KAAK,CAAC;YACZ,QAAQ,KAAK,CAAC;QAChB,SAAU;YACR,YAAY,IAAI;QAClB;IACF;IAEA,oBAAoB;IACpB,MAAM,iBAAiB,OAAO;QAC5B,YAAY,IAAI;QAChB,IAAI;YACF,MAAM,qHAAK,CAAC,IAAI,CAAC,CAAC,wDAAwD,EAAE,IAAI;YAChF,qJAAK,CAAC,OAAO,CAAC;YACd,aAAa,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,MAAM,mBAAmB;QAC9E,EAAE,OAAO,KAAK;YACZ,qJAAK,CAAC,KAAK,CAAC;YACZ,QAAQ,KAAK,CAAC;QAChB,SAAU;YACR,YAAY,IAAI;QAClB;IACF;IAEA,qBACE,qKAAC;QAAI,WAAU;;0BACb,qKAAC;;;;;0BACD,qKAAC;gBAAI,WAAU;;kCACb,qKAAC;wBAAG,WAAU;kCAA0C;;;;;;oBAIvD,UAAU,MAAM,KAAK,kBACpB,qKAAC;wBAAE,WAAU;kCAA4B;;;;;6CAEzC,qKAAC;wBAAI,WAAU;kCACZ,UAAU,GAAG,CAAC,CAAC,kBACd,qKAAC;gCAEC,WAAU;;kDAEV,qKAAC;;0DACC,qKAAC;gDAAG,WAAU;0DACX,EAAE,SAAS;;;;;;0DAEd,qKAAC;gDAAE,WAAU;;oDAAwB;oDAC/B,EAAE,KAAK;oDAAC;oDAAK,EAAE,EAAE;;;;;;;;;;;;;kDAIzB,qKAAC;wCAAI,WAAU;;0DACb,qKAAC,oIAAM;gDACL,UAAU,WAAW,QAAQ,CAAC,EAAE,EAAE;gDAClC,SAAS,IAAM,gBAAgB,EAAE,EAAE;gDACnC,WAAU;0DAET,WAAW,QAAQ,CAAC,EAAE,EAAE,IAAI,QAAQ;;;;;;0DAGvC,qKAAC,oIAAM;gDACL,UAAU,WAAW,QAAQ,CAAC,EAAE,EAAE;gDAClC,SAAS,IAAM,eAAe,EAAE,EAAE;gDAClC,WAAU;0DAET,WAAW,QAAQ,CAAC,EAAE,EAAE,IAAI,QAAQ;;;;;;;;;;;;;+BA1BpC,EAAE,EAAE;;;;;;;;;;;;;;;;;;;;;;AAoCzB","debugId":null}}]
}