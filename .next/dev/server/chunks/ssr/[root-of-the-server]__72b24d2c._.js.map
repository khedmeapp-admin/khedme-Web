{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///D:/Khedme/Khedme-Web/pages/jobs/%5Bid%5D/applications.js"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { useRouter } from 'next/router';\r\nimport toast, { Toaster } from 'react-hot-toast';\r\n\r\nexport default function JobApplicationsPage() {\r\n  const router = useRouter();\r\n  const { id } = router.query;\r\n  const [apps, setApps] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (!id) return;\r\n    fetch(`https://khedme-api.onrender.com/api/jobs/${id}/applications`)\r\n      .then((r) => r.json())\r\n      .then((d) => setApps(d.applications || []))\r\n      .catch((err) => {\r\n        console.error('Fetch error:', err);\r\n        toast.error('Failed to load');\r\n      });\r\n  }, [id]);\r\n\r\n  const act = async (appId, action) => {\r\n    const res = await fetch(\r\n      `https://khedme-api.onrender.com/api/jobs/applications/${appId}/${action}`,\r\n      { method: 'POST' }\r\n    );\r\n    const data = await res.json();\r\n    if (res.ok) {\r\n      toast.success(`${action}ed`);\r\n      setApps((a) => a.map((x) => (x.id === appId ? { ...x, status: action } : x)));\r\n    } else toast.error(data.message);\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-b from-orange-50 to-white p-6\">\r\n      <Toaster position=\"top-center\" />\r\n      <h1 className=\"text-2xl font-bold mb-4 text-orange-600\">Applications</h1>\r\n\r\n      <button\r\n        onClick={() => router.push(`/jobs/${id}`)}\r\n        className=\"mb-6 bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg shadow-md transition\"\r\n      >\r\n        ‚Üê Back to Job\r\n      </button>\r\n\r\n      {apps.map((a) => (\r\n        <div\r\n          key={a.id}\r\n          className=\"border border-orange-200 p-4 rounded-2xl mb-4 bg-white shadow-sm\"\r\n        >\r\n          <p className=\"text-gray-800\">{a.message}</p>\r\n          <p\r\n            className={`text-sm font-medium mb-2 ${\r\n              a.status === 'approved'\r\n                ? 'text-green-600'\r\n                : a.status === 'rejected'\r\n                ? 'text-red-500'\r\n                : 'text-orange-500'\r\n            }`}\r\n          >\r\n            Status: {a.status}\r\n          </p>\r\n          <div className=\"flex gap-2\">\r\n            <button\r\n              onClick={() => act(a.id, 'approve')}\r\n              disabled={a.status === 'approved'}\r\n              className=\"bg-orange-500 hover:bg-orange-600 text-white px-3 py-1 rounded transition\"\r\n            >\r\n              Approve\r\n            </button>\r\n            <button\r\n              onClick={() => act(a.id, 'reject')}\r\n              disabled={a.status === 'rejected'}\r\n              className=\"bg-gray-200 hover:bg-gray-300 text-gray-700 px-3 py-1 rounded transition\"\r\n            >\r\n              Reject\r\n            </button>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;;;;;AAEe,SAAS;IACtB,MAAM,SAAS,IAAA,oIAAS;IACxB,MAAM,EAAE,EAAE,EAAE,GAAG,OAAO,KAAK;IAC3B,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,+GAAQ,EAAC,EAAE;IAEnC,IAAA,gHAAS,EAAC;QACR,IAAI,CAAC,IAAI;QACT,MAAM,CAAC,yCAAyC,EAAE,GAAG,aAAa,CAAC,EAChE,IAAI,CAAC,CAAC,IAAM,EAAE,IAAI,IAClB,IAAI,CAAC,CAAC,IAAM,QAAQ,EAAE,YAAY,IAAI,EAAE,GACxC,KAAK,CAAC,CAAC;YACN,QAAQ,KAAK,CAAC,gBAAgB;YAC9B,qJAAK,CAAC,KAAK,CAAC;QACd;IACJ,GAAG;QAAC;KAAG;IAEP,MAAM,MAAM,OAAO,OAAO;QACxB,MAAM,MAAM,MAAM,MAChB,CAAC,sDAAsD,EAAE,MAAM,CAAC,EAAE,QAAQ,EAC1E;YAAE,QAAQ;QAAO;QAEnB,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,IAAI,IAAI,EAAE,EAAE;YACV,qJAAK,CAAC,OAAO,CAAC,GAAG,OAAO,EAAE,CAAC;YAC3B,QAAQ,CAAC,IAAM,EAAE,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,QAAQ;wBAAE,GAAG,CAAC;wBAAE,QAAQ;oBAAO,IAAI;QAC3E,OAAO,qJAAK,CAAC,KAAK,CAAC,KAAK,OAAO;IACjC;IAEA,qBACE,qKAAC;QAAI,WAAU;;0BACb,qKAAC,qJAAO;gBAAC,UAAS;;;;;;0BAClB,qKAAC;gBAAG,WAAU;0BAA0C;;;;;;0BAExD,qKAAC;gBACC,SAAS,IAAM,OAAO,IAAI,CAAC,CAAC,MAAM,EAAE,IAAI;gBACxC,WAAU;0BACX;;;;;;YAIA,KAAK,GAAG,CAAC,CAAC,kBACT,qKAAC;oBAEC,WAAU;;sCAEV,qKAAC;4BAAE,WAAU;sCAAiB,EAAE,OAAO;;;;;;sCACvC,qKAAC;4BACC,WAAW,CAAC,yBAAyB,EACnC,EAAE,MAAM,KAAK,aACT,mBACA,EAAE,MAAM,KAAK,aACb,iBACA,mBACJ;;gCACH;gCACU,EAAE,MAAM;;;;;;;sCAEnB,qKAAC;4BAAI,WAAU;;8CACb,qKAAC;oCACC,SAAS,IAAM,IAAI,EAAE,EAAE,EAAE;oCACzB,UAAU,EAAE,MAAM,KAAK;oCACvB,WAAU;8CACX;;;;;;8CAGD,qKAAC;oCACC,SAAS,IAAM,IAAI,EAAE,EAAE,EAAE;oCACzB,UAAU,EAAE,MAAM,KAAK;oCACvB,WAAU;8CACX;;;;;;;;;;;;;mBA3BE,EAAE,EAAE;;;;;;;;;;;AAmCnB","debugId":null}}]
}