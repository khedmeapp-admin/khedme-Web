{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["file:///D:/Khedme/Khedme-Web/src/pages/provider/dashboard.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { RefreshCw } from \"lucide-react\";\r\nimport toast from \"react-hot-toast\";\r\n\r\nexport default function ProviderDashboard() {\r\n  const [provider, setProvider] = useState(null);\r\n  const [applications, setApplications] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [fetching, setFetching] = useState(true);\r\n\r\n  // ✅ Load provider from localStorage\r\n  useEffect(() => {\r\n    const stored = localStorage.getItem(\"provider\");\r\n    if (stored) {\r\n      setProvider(JSON.parse(stored));\r\n    }\r\n  }, []);\r\n\r\n  // ✅ Fetch applications when provider is loaded\r\n  useEffect(() => {\r\n    if (provider?.id) {\r\n      fetchApplications();\r\n    }\r\n  }, [provider]);\r\n\r\n  const fetchApplications = async () => {\r\n    if (!provider?.id) return;\r\n\r\n    try {\r\n      setLoading(true);\r\n      const res = await fetch(\r\n        `${process.env.NEXT_PUBLIC_API_URL}/api/providers/applications/${provider.id}`\r\n      );\r\n\r\n      if (!res.ok) throw new Error(\"Network error\");\r\n\r\n      const data = await res.json();\r\n\r\n      if (data.success) {\r\n        setApplications(data.applications || []);\r\n      } else {\r\n        toast.error(\"Failed to load applications ❌\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"❌ Error fetching applications:\", err);\r\n      toast.error(\"Failed to connect to server ❌\");\r\n    } finally {\r\n      setLoading(false);\r\n      setFetching(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-orange-50 to-white text-gray-800\">\r\n      <div className=\"max-w-4xl mx-auto px-4 py-10\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between mb-8\">\r\n          <div>\r\n            <h1 className=\"text-3xl font-bold text-orange-600\">\r\n              Provider Dashboard\r\n            </h1>\r\n            {provider && (\r\n              <p className=\"text-gray-600 mt-1\">\r\n                Welcome,{\" \"}\r\n                <span className=\"font-semibold\">\r\n                  {provider.name || provider.full_name}\r\n                </span>\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          <Button\r\n            onClick={fetchApplications}\r\n            disabled={loading}\r\n            className=\"bg-orange-500 hover:bg-orange-600 text-white flex items-center gap-2\"\r\n          >\r\n            <RefreshCw className={`w-4 h-4 ${loading ? \"animate-spin\" : \"\"}`} />\r\n            Refresh\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Body */}\r\n        {fetching ? (\r\n          <div className=\"flex justify-center py-20\">\r\n            <div className=\"animate-pulse text-gray-400\">Loading...</div>\r\n          </div>\r\n        ) : applications.length === 0 ? (\r\n          <p className=\"text-gray-500 text-center py-10\">\r\n            No applications yet.\r\n          </p>\r\n        ) : (\r\n          <div className=\"grid gap-4\">\r\n            {applications.map((app) => (\r\n              <div\r\n                key={app.application_id || app.id}\r\n                className=\"bg-white p-5 rounded-2xl shadow-sm border border-orange-100 hover:shadow-md transition\"\r\n              >\r\n                <h2 className=\"text-lg font-semibold text-gray-800\">\r\n                  {app.service || app.job_service || \"Untitled Job\"}\r\n                </h2>\r\n                <p className=\"text-gray-500 text-sm\">\r\n                  {app.district || app.job_district} • Budget: $\r\n                  {app.budget || app.job_budget}\r\n                </p>\r\n                <p className=\"mt-2 text-gray-700\">\r\n                  {app.message || \"No message provided.\"}\r\n                </p>\r\n                <p\r\n                  className={`mt-3 inline-block px-3 py-1 rounded-full text-sm font-medium ${\r\n                    app.status === \"approved\"\r\n                      ? \"bg-green-100 text-green-700\"\r\n                      : app.status === \"rejected\"\r\n                      ? \"bg-red-100 text-red-700\"\r\n                      : \"bg-yellow-100 text-yellow-700\"\r\n                  }`}\r\n                >\r\n                  {app.status\r\n                    ? app.status.charAt(0).toUpperCase() + app.status.slice(1)\r\n                    : \"Pending\"}\r\n                </p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;;;;;;;;;;AAEe,SAAS;IACtB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,+GAAQ,EAAC;IACzC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,+GAAQ,EAAC,EAAE;IACnD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+GAAQ,EAAC;IACvC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,+GAAQ,EAAC;IAEzC,oCAAoC;IACpC,IAAA,gHAAS,EAAC;QACR,MAAM,SAAS,aAAa,OAAO,CAAC;QACpC,IAAI,QAAQ;YACV,YAAY,KAAK,KAAK,CAAC;QACzB;IACF,GAAG,EAAE;IAEL,+CAA+C;IAC/C,IAAA,gHAAS,EAAC;QACR,IAAI,UAAU,IAAI;YAChB;QACF;IACF,GAAG;QAAC;KAAS;IAEb,MAAM,oBAAoB;QACxB,IAAI,CAAC,UAAU,IAAI;QAEnB,IAAI;YACF,WAAW;YACX,MAAM,MAAM,MAAM,MAChB,uEAAmC,4BAA4B,EAAE,SAAS,EAAE,EAAE;YAGhF,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;YAE7B,MAAM,OAAO,MAAM,IAAI,IAAI;YAE3B,IAAI,KAAK,OAAO,EAAE;gBAChB,gBAAgB,KAAK,YAAY,IAAI,EAAE;YACzC,OAAO;gBACL,qJAAK,CAAC,KAAK,CAAC;YACd;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,kCAAkC;YAChD,qJAAK,CAAC,KAAK,CAAC;QACd,SAAU;YACR,WAAW;YACX,YAAY;QACd;IACF;IAEA,qBACE,qKAAC;QAAI,WAAU;kBACb,cAAA,qKAAC;YAAI,WAAU;;8BAEb,qKAAC;oBAAI,WAAU;;sCACb,qKAAC;;8CACC,qKAAC;oCAAG,WAAU;8CAAqC;;;;;;gCAGlD,0BACC,qKAAC;oCAAE,WAAU;;wCAAqB;wCACvB;sDACT,qKAAC;4CAAK,WAAU;sDACb,SAAS,IAAI,IAAI,SAAS,SAAS;;;;;;;;;;;;;;;;;;sCAM5C,qKAAC,oIAAM;4BACL,SAAS;4BACT,UAAU;4BACV,WAAU;;8CAEV,qKAAC,sNAAS;oCAAC,WAAW,CAAC,QAAQ,EAAE,UAAU,iBAAiB,IAAI;;;;;;gCAAI;;;;;;;;;;;;;gBAMvE,yBACC,qKAAC;oBAAI,WAAU;8BACb,cAAA,qKAAC;wBAAI,WAAU;kCAA8B;;;;;;;;;;2BAE7C,aAAa,MAAM,KAAK,kBAC1B,qKAAC;oBAAE,WAAU;8BAAkC;;;;;yCAI/C,qKAAC;oBAAI,WAAU;8BACZ,aAAa,GAAG,CAAC,CAAC,oBACjB,qKAAC;4BAEC,WAAU;;8CAEV,qKAAC;oCAAG,WAAU;8CACX,IAAI,OAAO,IAAI,IAAI,WAAW,IAAI;;;;;;8CAErC,qKAAC;oCAAE,WAAU;;wCACV,IAAI,QAAQ,IAAI,IAAI,YAAY;wCAAC;wCACjC,IAAI,MAAM,IAAI,IAAI,UAAU;;;;;;;8CAE/B,qKAAC;oCAAE,WAAU;8CACV,IAAI,OAAO,IAAI;;;;;;8CAElB,qKAAC;oCACC,WAAW,CAAC,6DAA6D,EACvE,IAAI,MAAM,KAAK,aACX,gCACA,IAAI,MAAM,KAAK,aACf,4BACA,iCACJ;8CAED,IAAI,MAAM,GACP,IAAI,MAAM,CAAC,MAAM,CAAC,GAAG,WAAW,KAAK,IAAI,MAAM,CAAC,KAAK,CAAC,KACtD;;;;;;;2BAxBD,IAAI,cAAc,IAAI,IAAI,EAAE;;;;;;;;;;;;;;;;;;;;;AAiCjD","debugId":null}}]
}