{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["file:///D:/Khedme/Khedme-Web/src/pages/admin/approve.js"],"sourcesContent":["// src/pages/admin/approve.js\r\nimport { useEffect, useState } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { toast } from \"react-hot-toast\";\r\nimport { Phone, Calendar, User, MapPin, Briefcase } from \"lucide-react\";\r\n\r\nexport default function ApproveProviders() {\r\n  const [providers, setProviders] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const API_BASE = process.env.NEXT_PUBLIC_API_BASE || \"https://khedme-api.onrender.com\";\r\n\r\n  useEffect(() => {\r\n    fetchProviders();\r\n  }, []);\r\n\r\n  const fetchProviders = async () => {\r\n    try {\r\n      const res = await fetch(`${API_BASE}/api/providers/pending`);\r\n      const data = await res.json();\r\n      if (data.success) {\r\n        setProviders(data.providers);\r\n      } else {\r\n        toast.error(\"Failed to load providers âŒ\");\r\n      }\r\n    } catch (err) {\r\n      toast.error(\"Error fetching providers\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleAction = async (id, action) => {\r\n    try {\r\n      const endpoint = `${API_BASE}/api/providers/${action}`;\r\n      const res = await fetch(endpoint, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ provider_id: id }),\r\n      });\r\n      const data = await res.json();\r\n      if (data.success) {\r\n        toast.success(`Provider ${action}ed successfully âœ…`);\r\n        setProviders((prev) => prev.filter((p) => p.id !== id));\r\n      } else {\r\n        toast.error(data.message || `Failed to ${action} provider`);\r\n      }\r\n    } catch (err) {\r\n      toast.error(\"Action failed\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 py-10 px-4 transition-colors duration-300\">\r\n      <h1 className=\"text-2xl md:text-3xl font-bold text-center text-orange-600 dark:text-orange-400 mb-8\">\r\n        Pending Provider Approvals\r\n      </h1>\r\n\r\n      {loading ? (\r\n        <p className=\"text-center text-gray-500 dark:text-gray-300\">Loading...</p>\r\n      ) : providers.length === 0 ? (\r\n        <p className=\"text-center text-gray-500 dark:text-gray-300\">\r\n          No pending providers ðŸŽ‰\r\n        </p>\r\n      ) : (\r\n        <div className=\"max-w-3xl mx-auto space-y-5\">\r\n          {providers.map((provider, i) => (\r\n            <motion.div\r\n              key={provider.id}\r\n              initial={{ opacity: 0, y: 15 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              transition={{ delay: i * 0.05 }}\r\n              className=\"bg-white dark:bg-gray-800 shadow-md hover:shadow-lg rounded-2xl p-5 flex flex-col sm:flex-row sm:items-center justify-between gap-4 border border-gray-100 dark:border-gray-700\"\r\n            >\r\n              <div className=\"flex items-center gap-4\">\r\n                <img\r\n                  src={\r\n                    provider.profile_image ||\r\n                    `https://ui-avatars.com/api/?name=${encodeURIComponent(\r\n                      provider.full_name\r\n                    )}&background=ff7f11&color=fff`\r\n                  }\r\n                  alt={provider.full_name}\r\n                  className=\"w-12 h-12 rounded-full border-2 border-orange-500 object-cover\"\r\n                />\r\n\r\n                <div>\r\n                  <h2 className=\"font-semibold text-gray-800 dark:text-gray-100\">\r\n                    {provider.full_name || \"Unnamed Provider\"}\r\n                  </h2>\r\n                  <p className=\"flex items-center text-gray-600 dark:text-gray-400 text-sm mt-1\">\r\n                    <Phone size={14} className=\"mr-1\" /> {provider.phone || \"N/A\"}\r\n                  </p>\r\n                  <div className=\"flex flex-wrap gap-2 text-sm mt-1\">\r\n                    {provider.category_id && (\r\n                      <span className=\"flex items-center text-gray-600 dark:text-gray-400\">\r\n                        <Briefcase size={14} className=\"mr-1\" /> Category #{provider.category_id}\r\n                      </span>\r\n                    )}\r\n                    {provider.district_id && (\r\n                      <span className=\"flex items-center text-gray-600 dark:text-gray-400\">\r\n                        <MapPin size={14} className=\"mr-1\" /> District #{provider.district_id}\r\n                      </span>\r\n                    )}\r\n                    <span className=\"flex items-center text-gray-600 dark:text-gray-400\">\r\n                      <Calendar size={14} className=\"mr-1\" />{\" \"}\r\n                      Joined {new Date(provider.created_at).toLocaleDateString()}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex gap-3 sm:ml-4\">\r\n                <button\r\n                  onClick={() => handleAction(provider.id, \"approve\")}\r\n                  className=\"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg text-sm font-medium flex items-center gap-1 transition\"\r\n                >\r\n                  <User size={15} /> Approve\r\n                </button>\r\n                <button\r\n                  onClick={() => handleAction(provider.id, \"reject\")}\r\n                  className=\"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-medium flex items-center gap-1 transition\"\r\n                >\r\n                  âœ– Reject\r\n                </button>\r\n              </div>\r\n            </motion.div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}